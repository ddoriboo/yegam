<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê´€ë¦¬ì í˜ì´ì§€ | ì˜ˆê²œ</title>
    <script src="https://cdn.tailwindcss.com?plugins=typography"></script>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="bg-gray-50 text-gray-900 font-sans">

    <div id="app-container" class="min-h-screen flex flex-col">

        <!-- Header -->
        <header class="bg-white/90 backdrop-blur-sm sticky top-0 z-50 border-b border-gray-200">
            <nav class="container mx-auto px-4 lg:px-8 py-3 flex justify-between items-center">
                <a href="index.html" class="flex items-center space-x-3">
                    <img src="https://github.com/ddoriboo/yegam/raw/refs/heads/main/logo.png" alt="ì˜ˆê²œ Logo" class="h-8 w-auto">
                    <span class="text-xl font-bold tracking-tight text-gray-900">ì˜ˆê²œ</span>
                </a>
                
                <!-- Desktop Navigation -->
                <div class="hidden md:flex items-center space-x-6 text-sm font-medium text-gray-600">
                    <a href="issues.html" class="hover:text-gray-900 transition-colors">ì „ì²´ ì´ìŠˆ</a>
                    <a href="tier_guide.html" class="hover:text-gray-900 transition-colors">ì—…ì  ì•ˆë‚´</a>
                    <a href="mypage.html" class="hover:text-gray-900 transition-colors">ë‚´ ì •ë³´</a>
                    <a href="admin.html" class="text-red-600 font-semibold">ê´€ë¦¬ì</a>
                </div>
                
                <!-- Mobile & User Actions Container -->
                <div class="flex items-center space-x-2">
                    <!-- Mobile Menu Button -->
                    <button id="mobile-menu-btn" class="md:hidden p-2 rounded-md hover:bg-gray-100 transition-colors">
                        <i data-lucide="menu" class="w-5 h-5 text-gray-600"></i>
                    </button>
                    
                    <!-- User Actions -->
                    <div id="header-user-actions" class="flex items-center space-x-2">
                        <!-- This will be dynamically populated by js/app.js -->
                    </div>
                </div>
            </nav>
            
            <!-- Mobile Navigation Menu -->
            <div id="mobile-menu" class="hidden md:hidden bg-white/95 backdrop-blur-sm border-t border-gray-200">
                <div class="container mx-auto px-4 py-4 space-y-3">
                    <a href="issues.html" class="block px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors">
                        <i data-lucide="list" class="w-4 h-4 inline mr-2"></i>ì „ì²´ ì´ìŠˆ
                    </a>
                    <a href="tier_guide.html" class="block px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors">
                        <i data-lucide="award" class="w-4 h-4 inline mr-2"></i>ì—…ì  ì•ˆë‚´
                    </a>
                    <a href="mypage.html" class="block px-3 py-2 text-sm font-medium text-gray-600 hover:text-gray-900 hover:bg-gray-50 rounded-md transition-colors">
                        <i data-lucide="user" class="w-4 h-4 inline mr-2"></i>ë‚´ ì •ë³´
                    </a>
                    <a href="admin.html" class="block px-3 py-2 text-sm font-medium text-red-600 bg-red-50 rounded-md transition-colors">
                        <i data-lucide="settings" class="w-4 h-4 inline mr-2"></i>ê´€ë¦¬ì
                    </a>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="flex-grow container mx-auto px-4 lg:px-8 py-12">
            <div class="flex items-center justify-between mb-8">
                <div>
                    <h1 class="text-3xl md:text-4xl font-bold text-gray-900 mb-2">ê´€ë¦¬ì í˜ì´ì§€</h1>
                    <p class="text-gray-600">ì´ìŠˆì™€ ëŒ“ê¸€ì„ ìƒì„±í•˜ê³  ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                </div>
                <button id="create-issue-btn" class="btn-primary">
                    <i data-lucide="plus" class="w-4 h-4 mr-2"></i>
                    ìƒˆ ì´ìŠˆ ìƒì„±
                </button>
            </div>
            
            <!-- ê´€ë¦¬ íƒ­ -->
            <div class="mb-8">
                <nav class="flex space-x-8 overflow-x-auto">
                    <button id="issues-tab" class="admin-tab active pb-4 border-b-2 border-blue-500 text-blue-600 font-medium whitespace-nowrap">
                        ì´ìŠˆ ê´€ë¦¬
                    </button>
                    <button id="issue-requests-tab" class="admin-tab pb-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium whitespace-nowrap">
                        ì´ìŠˆ ì‹ ì²­ ê´€ë¦¬
                    </button>
                    <button id="results-tab" class="admin-tab pb-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium whitespace-nowrap">
                        ê²°ê³¼ ê´€ë¦¬
                    </button>
                    <button id="comments-tab" class="admin-tab pb-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium whitespace-nowrap">
                        ëŒ“ê¸€ ê´€ë¦¬
                    </button>
                    <button id="scheduler-tab" class="admin-tab pb-4 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium whitespace-nowrap">
                        ìŠ¤ì¼€ì¤„ëŸ¬ ê´€ë¦¬
                    </button>
                </nav>
            </div>

            <!-- ìƒˆ ì´ìŠˆ ìƒì„± í¼ -->
            <div id="create-issue-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-bold text-gray-900">ìƒˆ ì´ìŠˆ ìƒì„±</h2>
                            <button id="close-modal-btn" class="text-gray-400 hover:text-gray-600">
                                <i data-lucide="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                    <form id="create-issue-form" class="p-6 space-y-6">
                        <div>
                            <label for="issue-title" class="block text-sm font-medium text-gray-700 mb-2">ì´ìŠˆ ì œëª©</label>
                            <input type="text" id="issue-title" name="title" class="modern-input w-full" placeholder="ì˜ˆ: ë¹„íŠ¸ì½”ì¸, 2025ë…„ ë‚´ 20ë§Œ ë‹¬ëŸ¬ ëŒíŒŒí• ê¹Œ?" required>
                        </div>
                        <div>
                            <label for="issue-category" class="block text-sm font-medium text-gray-700 mb-2">ì¹´í…Œê³ ë¦¬</label>
                            <select id="issue-category" name="category" class="modern-select w-full" required>
                                <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                                <option value="ì •ì¹˜">ì •ì¹˜</option>
                                <option value="ìŠ¤í¬ì¸ ">ìŠ¤í¬ì¸ </option>
                                <option value="ê²½ì œ">ê²½ì œ</option>
                                <option value="ì½”ì¸">ì½”ì¸</option>
                                <option value="í…Œí¬">í…Œí¬</option>
                                <option value="ì—”í„°">ì—”í„°</option>
                                <option value="ë‚ ì”¨">ë‚ ì”¨</option>
                                <option value="í•´ì™¸">í•´ì™¸</option>
                            </select>
                        </div>
                        <div>
                            <label for="issue-end-date" class="block text-sm font-medium text-gray-700 mb-2">ë§ˆê°ì¼</label>
                            <input type="datetime-local" id="issue-end-date" name="endDate" class="modern-input w-full" required>
                        </div>
                        <div>
                            <label for="issue-description" class="block text-sm font-medium text-gray-700 mb-2">ì„¤ëª… (ì„ íƒì‚¬í•­)</label>
                            <textarea id="issue-description" name="description" class="modern-input w-full" rows="3" placeholder="ì´ìŠˆì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…"></textarea>
                        </div>
                        <div>
                            <label for="issue-image" class="block text-sm font-medium text-gray-700 mb-2">ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì„ íƒì‚¬í•­)</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                <input type="file" id="issue-image" name="image" accept="image/*" class="hidden">
                                <input type="hidden" id="image-url" name="imageUrl" value="">
                                <div id="image-preview" class="hidden mb-4">
                                    <img id="preview-img" src="" alt="ë¯¸ë¦¬ë³´ê¸°" class="mx-auto max-h-32 rounded">
                                    <button type="button" id="remove-image" class="mt-2 text-red-600 text-sm">ì´ë¯¸ì§€ ì œê±°</button>
                                </div>
                                <div id="upload-area" class="cursor-pointer" onclick="document.getElementById('issue-image').click()">
                                    <i data-lucide="upload" class="w-8 h-8 mx-auto text-gray-400 mb-2"></i>
                                    <p class="text-sm text-gray-600">í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ì„¸ìš”</p>
                                    <p class="text-xs text-gray-500 mt-1">PNG, JPG, JPEG (ìµœëŒ€ 5MB)</p>
                                </div>
                                <div id="upload-progress" class="hidden mt-2">
                                    <div class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                    <p class="text-xs text-gray-600 mt-1">ì—…ë¡œë“œ ì¤‘...</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="issue-yes-price" class="block text-sm font-medium text-gray-700 mb-2">ì´ˆê¸° Yes í™•ë¥  (%)</label>
                            <input type="number" id="issue-yes-price" name="yesPrice" class="modern-input w-full" min="1" max="99" value="50" required>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="issue-popular" name="isPopular" class="mr-2">
                            <label for="issue-popular" class="text-sm text-gray-700">ì¸ê¸° ì´ìŠˆë¡œ í‘œì‹œ</label>
                        </div>
                        <div class="flex space-x-3 pt-4">
                            <button type="submit" class="btn-primary flex-1">ì´ìŠˆ ìƒì„±</button>
                            <button type="button" id="cancel-btn" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors">ì·¨ì†Œ</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- ì´ìŠˆ ìˆ˜ì • ëª¨ë‹¬ -->
            <div id="edit-issue-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-bold text-gray-900">ì´ìŠˆ ìˆ˜ì •</h2>
                            <button id="close-edit-modal-btn" class="text-gray-400 hover:text-gray-600">
                                <i data-lucide="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                    <form id="edit-issue-form" class="p-6 space-y-6">
                        <input type="hidden" id="edit-issue-id" name="issueId">
                        <div>
                            <label for="edit-issue-title" class="block text-sm font-medium text-gray-700 mb-2">ì´ìŠˆ ì œëª©</label>
                            <input type="text" id="edit-issue-title" name="title" class="modern-input w-full" required>
                        </div>
                        <div>
                            <label for="edit-issue-category" class="block text-sm font-medium text-gray-700 mb-2">ì¹´í…Œê³ ë¦¬</label>
                            <select id="edit-issue-category" name="category" class="modern-select w-full" required>
                                <option value="">ì¹´í…Œê³ ë¦¬ ì„ íƒ</option>
                                <option value="ì •ì¹˜">ì •ì¹˜</option>
                                <option value="ìŠ¤í¬ì¸ ">ìŠ¤í¬ì¸ </option>
                                <option value="ê²½ì œ">ê²½ì œ</option>
                                <option value="ì½”ì¸">ì½”ì¸</option>
                                <option value="í…Œí¬">í…Œí¬</option>
                                <option value="ì—”í„°">ì—”í„°</option>
                                <option value="ë‚ ì”¨">ë‚ ì”¨</option>
                                <option value="í•´ì™¸">í•´ì™¸</option>
                            </select>
                        </div>
                        <div>
                            <label for="edit-issue-end-date" class="block text-sm font-medium text-gray-700 mb-2">ë§ˆê°ì¼</label>
                            <input type="datetime-local" id="edit-issue-end-date" name="endDate" class="modern-input w-full" required>
                        </div>
                        <div>
                            <label for="edit-issue-description" class="block text-sm font-medium text-gray-700 mb-2">ì„¤ëª… (ì„ íƒì‚¬í•­)</label>
                            <textarea id="edit-issue-description" name="description" class="modern-input w-full" rows="3"></textarea>
                        </div>
                        <div>
                            <label for="edit-issue-image" class="block text-sm font-medium text-gray-700 mb-2">ì´ë¯¸ì§€ ì—…ë¡œë“œ (ì„ íƒì‚¬í•­)</label>
                            <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                                <input type="file" id="edit-issue-image" name="image" accept="image/*" class="hidden">
                                <input type="hidden" id="edit-image-url" name="imageUrl" value="">
                                <div id="edit-image-preview" class="hidden mb-4">
                                    <img id="edit-preview-img" src="" alt="ë¯¸ë¦¬ë³´ê¸°" class="mx-auto max-h-32 rounded">
                                    <button type="button" id="edit-remove-image" class="mt-2 text-red-600 text-sm">ì´ë¯¸ì§€ ì œê±°</button>
                                </div>
                                <div id="edit-upload-area" class="cursor-pointer" onclick="document.getElementById('edit-issue-image').click()">
                                    <i data-lucide="upload" class="w-8 h-8 mx-auto text-gray-400 mb-2"></i>
                                    <p class="text-sm text-gray-600">í´ë¦­í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì—…ë¡œë“œí•˜ê±°ë‚˜ ë“œë˜ê·¸ ì•¤ ë“œë¡­í•˜ì„¸ìš”</p>
                                    <p class="text-xs text-gray-500 mt-1">PNG, JPG, JPEG (ìµœëŒ€ 5MB)</p>
                                </div>
                                <div id="edit-upload-progress" class="hidden mt-2">
                                    <div class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                                    <p class="text-xs text-gray-600 mt-1">ì—…ë¡œë“œ ì¤‘...</p>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label for="edit-issue-yes-price" class="block text-sm font-medium text-gray-700 mb-2">ì´ˆê¸° Yes í™•ë¥  (%)</label>
                            <input type="number" id="edit-issue-yes-price" name="yesPrice" class="modern-input w-full" min="1" max="99" required>
                        </div>
                        <div class="flex items-center">
                            <input type="checkbox" id="edit-issue-popular" name="isPopular" class="mr-2">
                            <label for="edit-issue-popular" class="text-sm text-gray-700">ì¸ê¸° ì´ìŠˆë¡œ í‘œì‹œ</label>
                        </div>
                        <div class="flex space-x-3 pt-4">
                            <button type="submit" class="btn-primary flex-1">ì´ìŠˆ ìˆ˜ì •</button>
                            <button type="button" id="edit-cancel-btn" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors">ì·¨ì†Œ</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- ì´ìŠˆ ê´€ë¦¬ í…Œì´ë¸” -->
            <div id="issues-section" class="bg-white rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200">
                    <h3 class="text-lg font-semibold text-gray-900">ì´ìŠˆ ê´€ë¦¬</h3>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì´ìŠˆ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì¹´í…Œê³ ë¦¬</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Yes í™•ë¥ </th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì°¸ì—¬ëŸ‰</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒíƒœ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody id="issues-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- ì´ìŠˆ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- ì´ìŠˆ ì‹ ì²­ ê´€ë¦¬ ì„¹ì…˜ -->
            <div id="issue-requests-section" class="hidden bg-white rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">ì´ìŠˆ ì‹ ì²­ ê´€ë¦¬</h3>
                        <p class="text-sm text-gray-600 mt-1">ì‚¬ìš©ìê°€ ì‹ ì²­í•œ ì´ìŠˆë¥¼ ê²€í† í•˜ê³  ìŠ¹ì¸/ê±°ë¶€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</p>
                    </div>
                    <div class="flex items-center space-x-3">
                        <select id="request-status-filter" class="text-sm border border-gray-300 rounded-md px-3 py-1">
                            <option value="all">ì „ì²´ ìƒíƒœ</option>
                            <option value="pending" selected>ëŒ€ê¸° ì¤‘</option>
                            <option value="approved">ìŠ¹ì¸ë¨</option>
                            <option value="rejected">ê±°ë¶€ë¨</option>
                        </select>
                        <button id="refresh-requests-btn" class="btn-secondary text-sm">
                            <i data-lucide="refresh-cw" class="w-4 h-4 mr-1"></i>
                            ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‹ ì²­ ì •ë³´</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‹ ì²­ì</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì¹´í…Œê³ ë¦¬</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ë§ˆê°ì¼</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒíƒœ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody id="issue-requests-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- ì´ìŠˆ ì‹ ì²­ ëª©ë¡ì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
                        </tbody>
                    </table>
                </div>
                
                <!-- ì´ìŠˆ ì‹ ì²­ì´ ì—†ì„ ë•Œ -->
                <div id="no-requests-message" class="hidden text-center py-12">
                    <i data-lucide="inbox" class="w-12 h-12 mx-auto text-gray-300 mb-4"></i>
                    <p class="text-gray-500">í˜„ì¬ ì´ìŠˆ ì‹ ì²­ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
                
                <!-- ë¡œë”© ìƒíƒœ -->
                <div id="requests-loading" class="text-center py-12">
                    <i data-lucide="loader" class="w-6 h-6 animate-spin mx-auto mb-2 text-gray-400"></i>
                    <p class="text-gray-500">ì´ìŠˆ ì‹ ì²­ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
                </div>
            </div>
            
            <!-- ì´ìŠˆ ì‹ ì²­ ìƒì„¸ ëª¨ë‹¬ -->
            <div id="request-detail-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-bold text-gray-900">ì´ìŠˆ ì‹ ì²­ ìƒì„¸</h2>
                            <button id="close-request-modal-btn" class="text-gray-400 hover:text-gray-600">
                                <i data-lucide="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                    <div id="request-detail-content" class="p-6">
                        <!-- ìƒì„¸ ë‚´ìš©ì´ ì—¬ê¸°ì— ë¡œë“œë©ë‹ˆë‹¤ -->
                    </div>
                    <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
                        <button id="reject-request-btn" class="px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 transition-colors">
                            ê±°ë¶€
                        </button>
                        <button id="approve-request-btn" class="px-4 py-2 bg-green-600 text-white text-sm font-medium rounded-md hover:bg-green-700 transition-colors">
                            ìŠ¹ì¸ (1000 GAM ì§€ê¸‰)
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- ê²°ê³¼ ê´€ë¦¬ ì„¹ì…˜ -->
            <div id="results-section" class="hidden bg-white rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">ì´ìŠˆ ê²°ê³¼ ê´€ë¦¬</h3>
                        <p class="text-sm text-gray-600 mt-1">ë§ˆê°ëœ ì´ìŠˆì˜ ê²°ê³¼ë¥¼ ê²°ì •í•˜ê³  ë³´ìƒì„ ì§€ê¸‰í•©ë‹ˆë‹¤</p>
                    </div>
                    <div class="flex items-center space-x-4">
                        <select id="result-filter" class="text-sm border border-gray-300 rounded-md px-3 py-1">
                            <option value="closed">ë§ˆê°ëœ ì´ìŠˆ</option>
                            <option value="pending">ê²°ê³¼ ëŒ€ê¸°</option>
                            <option value="resolved">ê²°ê³¼ í™•ì •</option>
                            <option value="all">ëª¨ë“  ì´ìŠˆ (ë””ë²„ê¹…)</option>
                        </select>
                        <button id="refresh-results" class="text-sm text-gray-600 hover:text-gray-900">
                            <i data-lucide="refresh-cw" class="w-4 h-4 mr-1"></i>
                            ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì´ìŠˆ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì¹´í…Œê³ ë¦¬</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ë§ˆê°ì¼</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì°¸ì—¬ í˜„í™©</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒíƒœ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ê²°ê³¼</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody id="results-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- ê²°ê³¼ ê´€ë¦¬ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- ì´ìŠˆ ê²°ê³¼ ì…ë ¥ ëª¨ë‹¬ -->
            <div id="result-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
                <div class="bg-white rounded-lg max-w-lg w-full">
                    <div class="p-6 border-b border-gray-200">
                        <div class="flex items-center justify-between">
                            <h2 class="text-xl font-bold text-gray-900">ì´ìŠˆ ê²°ê³¼ ê²°ì •</h2>
                            <button id="close-result-modal-btn" class="text-gray-400 hover:text-gray-600">
                                <i data-lucide="x" class="w-6 h-6"></i>
                            </button>
                        </div>
                    </div>
                    <form id="result-form" class="p-6 space-y-6">
                        <input type="hidden" id="result-issue-id" name="issueId">
                        
                        <!-- ì´ìŠˆ ì •ë³´ í‘œì‹œ -->
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <h3 id="result-issue-title" class="font-medium text-gray-900 mb-2"></h3>
                            <div class="grid grid-cols-2 gap-4 text-sm text-gray-600">
                                <div>
                                    <span class="font-medium">ì¹´í…Œê³ ë¦¬:</span>
                                    <span id="result-issue-category" class="ml-1"></span>
                                </div>
                                <div>
                                    <span class="font-medium">ë§ˆê°ì¼:</span>
                                    <span id="result-issue-end-date" class="ml-1"></span>
                                </div>
                            </div>
                        </div>

                        <!-- ê²°ê³¼ ì„ íƒ -->
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-3">ê²°ê³¼ ì„ íƒ</label>
                            <div class="grid grid-cols-2 gap-3">
                                <label class="relative">
                                    <input type="radio" name="result" value="Yes" class="sr-only">
                                    <div class="result-option p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-green-300 text-center">
                                        <div class="text-2xl mb-2">âœ…</div>
                                        <div class="font-medium text-green-600">Yes</div>
                                        <div class="text-sm text-gray-500">ì´ìŠˆê°€ ì‹¤í˜„ë¨</div>
                                    </div>
                                </label>
                                <label class="relative">
                                    <input type="radio" name="result" value="No" class="sr-only">
                                    <div class="result-option p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-red-300 text-center">
                                        <div class="text-2xl mb-2">âŒ</div>
                                        <div class="font-medium text-red-600">No</div>
                                        <div class="text-sm text-gray-500">ì´ìŠˆê°€ ì‹¤í˜„ë˜ì§€ ì•ŠìŒ</div>
                                    </div>
                                </label>
                            </div>
                            <div class="grid grid-cols-2 gap-3 mt-3">
                                <label class="relative">
                                    <input type="radio" name="result" value="Draw" class="sr-only">
                                    <div class="result-option p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-yellow-300 text-center">
                                        <div class="text-2xl mb-2">âš–ï¸</div>
                                        <div class="font-medium text-yellow-600">ë¬´ìŠ¹ë¶€</div>
                                        <div class="text-sm text-gray-500">íŒë‹¨ ë¶ˆê°€ëŠ¥</div>
                                    </div>
                                </label>
                                <label class="relative">
                                    <input type="radio" name="result" value="Cancelled" class="sr-only">
                                    <div class="result-option p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-gray-400 text-center">
                                        <div class="text-2xl mb-2">ğŸš«</div>
                                        <div class="font-medium text-gray-600">ì·¨ì†Œ</div>
                                        <div class="text-sm text-gray-500">ì´ìŠˆ ì·¨ì†Œ</div>
                                    </div>
                                </label>
                            </div>
                        </div>

                        <!-- ê²°ì • ì‚¬ìœ  -->
                        <div>
                            <label for="result-reason" class="block text-sm font-medium text-gray-700 mb-2">ê²°ì • ì‚¬ìœ </label>
                            <textarea id="result-reason" name="reason" class="modern-input w-full" rows="3" placeholder="ê²°ê³¼ë¥¼ ê²°ì •í•œ ì´ìœ ë¥¼ ì…ë ¥í•˜ì„¸ìš”" required></textarea>
                        </div>

                        <!-- ë²„íŠ¼ -->
                        <div class="flex space-x-3 pt-4">
                            <button type="submit" class="btn-primary flex-1">ê²°ê³¼ í™•ì • ë° ë³´ìƒ ì§€ê¸‰</button>
                            <button type="button" id="result-cancel-btn" class="px-6 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors">ì·¨ì†Œ</button>
                        </div>
                    </form>
                </div>
            </div>
            
            <!-- ëŒ“ê¸€ ê´€ë¦¬ ì„¹ì…˜ -->
            <div id="comments-section" class="hidden bg-white rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200 flex items-center justify-between">
                    <h3 class="text-lg font-semibold text-gray-900">ëŒ“ê¸€ ê´€ë¦¬</h3>
                    <div class="flex items-center space-x-4">
                        <select id="comment-filter" class="text-sm border border-gray-300 rounded-md px-3 py-1">
                            <option value="all">ì „ì²´ ëŒ“ê¸€</option>
                            <option value="reported">ì‹ ê³ ëœ ëŒ“ê¸€</option>
                            <option value="highlighted">ê°•ì¡°ëœ ëŒ“ê¸€</option>
                        </select>
                        <button id="refresh-comments" class="text-sm text-gray-600 hover:text-gray-900">
                            <i data-lucide="refresh-cw" class="w-4 h-4 mr-1"></i>
                            ìƒˆë¡œê³ ì¹¨
                        </button>
                    </div>
                </div>
                <div class="overflow-x-auto">
                    <table class="w-full">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ëŒ“ê¸€</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‘ì„±ì</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì´ìŠˆ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì¢‹ì•„ìš”</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ìƒíƒœ</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì‘ì„±ì¼</th>
                                <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">ì•¡ì…˜</th>
                            </tr>
                        </thead>
                        <tbody id="comments-table-body" class="bg-white divide-y divide-gray-200">
                            <!-- ëŒ“ê¸€ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ìƒì„±ë©ë‹ˆë‹¤ -->
                        </tbody>
                    </table>
                </div>
                <div id="comments-loading" class="hidden flex items-center justify-center py-8">
                    <i data-lucide="loader" class="w-6 h-6 animate-spin mr-2"></i>
                    <span class="text-gray-600">ëŒ“ê¸€ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</span>
                </div>
                <div id="comments-empty" class="hidden text-center py-8 text-gray-500">
                    <i data-lucide="message-circle" class="w-8 h-8 mx-auto mb-2 text-gray-300"></i>
                    <p>ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
                </div>
            </div>
            
            <!-- ìŠ¤ì¼€ì¤„ëŸ¬ ê´€ë¦¬ ì„¹ì…˜ -->
            <div id="scheduler-section" class="hidden bg-white rounded-lg border border-gray-200 overflow-hidden">
                <div class="px-6 py-4 border-b border-gray-200">
                    <div>
                        <h3 class="text-lg font-semibold text-gray-900">ì´ìŠˆ ìë™ ë§ˆê° ìŠ¤ì¼€ì¤„ëŸ¬</h3>
                        <p class="text-sm text-gray-600 mt-1">ë§Œë£Œëœ ì´ìŠˆë¥¼ ìë™ìœ¼ë¡œ ë§ˆê° ì²˜ë¦¬í•˜ëŠ” ìŠ¤ì¼€ì¤„ëŸ¬ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤</p>
                    </div>
                </div>
                <div class="p-6 space-y-6">
                    <!-- ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="text-md font-medium text-gray-900 mb-3">ìŠ¤ì¼€ì¤„ëŸ¬ ìƒíƒœ</h4>
                        <div id="scheduler-status" class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-white p-3 rounded border">
                                <div class="text-sm text-gray-600">ìƒíƒœ</div>
                                <div id="scheduler-running-status" class="text-lg font-semibold">
                                    <span class="inline-flex items-center">
                                        <i data-lucide="loader" class="w-4 h-4 animate-spin mr-2"></i>
                                        í™•ì¸ ì¤‘...
                                    </span>
                                </div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-sm text-gray-600">ë‹¤ìŒ ì‹¤í–‰</div>
                                <div id="scheduler-next-run" class="text-lg font-semibold text-gray-900">-</div>
                            </div>
                            <div class="bg-white p-3 rounded border">
                                <div class="text-sm text-gray-600">í˜„ì¬ ì‹œê°„</div>
                                <div id="scheduler-current-time" class="text-lg font-semibold text-gray-900">-</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- ìŠ¤ì¼€ì¤„ëŸ¬ ì•¡ì…˜ -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="text-md font-medium text-gray-900 mb-3">ìˆ˜ë™ ì‘ì—…</h4>
                        <div class="flex space-x-3">
                            <button id="manual-check-btn" class="btn-primary">
                                <i data-lucide="play" class="w-4 h-4 mr-2"></i>
                                ìˆ˜ë™ ë§ˆê° ê²€ì‚¬ ì‹¤í–‰
                            </button>
                            <button id="refresh-scheduler-status" class="px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors">
                                <i data-lucide="refresh-cw" class="w-4 h-4 mr-2"></i>
                                ìƒíƒœ ìƒˆë¡œê³ ì¹¨
                            </button>
                        </div>
                        <p class="text-sm text-gray-600 mt-2">
                            ìˆ˜ë™ ë§ˆê° ê²€ì‚¬ë¥¼ ì‹¤í–‰í•˜ë©´ í˜„ì¬ ì‹œê°„ ê¸°ì¤€ìœ¼ë¡œ ë§Œë£Œëœ ëª¨ë“  ì´ìŠˆë¥¼ ì¦‰ì‹œ ë§ˆê° ì²˜ë¦¬í•©ë‹ˆë‹¤.
                        </p>
                    </div>
                    
                    <!-- ìŠ¤ì¼€ì¤„ëŸ¬ ë¡œê·¸ -->
                    <div class="bg-gray-50 p-4 rounded-lg">
                        <h4 class="text-md font-medium text-gray-900 mb-3">ìµœê·¼ í™œë™</h4>
                        <div id="scheduler-logs" class="bg-white p-3 rounded border max-h-48 overflow-y-auto">
                            <div class="text-sm text-gray-500">ë¡œê·¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="bg-gray-50 border-t border-gray-200">
            <div class="container mx-auto px-4 lg:px-8 py-8">
                <div class="flex flex-col md:flex-row justify-between items-center text-center md:text-left space-y-4 md:space-y-0">
                    <div>
                        <a href="index.html" class="flex items-center justify-center md:justify-start space-x-2 mb-2">
                             <img src="https://github.com/ddoriboo/yegam/raw/refs/heads/main/logo.png" alt="ì˜ˆê²œ Logo" class="h-6 w-auto">
                             <span class="font-semibold text-gray-900">ì˜ˆê²œ</span>
                        </a>
                        <p class="text-xs text-gray-500 max-w-md">ë³¸ ì„œë¹„ìŠ¤ëŠ” í˜„ê¸ˆ ë² íŒ…ì„ ì œê³µí•˜ì§€ ì•ŠëŠ” ì˜ˆì¸¡ ì •ë³´ í”Œë«í¼ì´ë©°, ì‚¬ìš©ë˜ëŠ” GAMì€ í™˜ì „ ë° í˜„ê¸ˆí™”ê°€ ë¶ˆê°€ëŠ¥í•œ ì‚¬ì´ë²„ ìì‚°ì…ë‹ˆë‹¤.</p>
                    </div>
                    <div class="flex space-x-6 text-sm text-gray-500">
                        <a href="#" class="hover:text-gray-900 transition-colors">ì‚¬ì´íŠ¸ ì •ë³´</a>
                        <a href="#" class="hover:text-gray-900 transition-colors">ì´ìš©ì•½ê´€</a>
                        <a href="#" class="hover:text-gray-900 transition-colors">ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨</a>
                    </div>
                </div>
                <div class="mt-8 border-t border-gray-200 pt-4 text-center text-xs text-gray-500">
                    &copy; 2025 ì˜ˆê²œ. All Rights Reserved.
                </div>
            </div>
        </footer>

    </div>

    <!-- ê´€ë¦¬ì ì¸ì¦ ìŠ¤í¬ë¦½íŠ¸ (ë°˜ë“œì‹œ ë‹¤ë¥¸ ìŠ¤í¬ë¦½íŠ¸ë³´ë‹¤ ë¨¼ì € ì‹¤í–‰) -->
    <script>
        // ê´€ë¦¬ì ì¸ì¦ í™•ì¸ í•¨ìˆ˜
        async function checkAdminAuth() {
            const adminToken = localStorage.getItem('admin-token');
            
            if (!adminToken) {
                console.warn('âš ï¸ ê´€ë¦¬ì í† í°ì´ ì—†ìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
                window.location.href = '/admin-login';
                return false;
            }
            
            try {
                const response = await fetch('/api/admin-auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });
                
                const data = await response.json();
                
                if (!data.success) {
                    console.warn('âš ï¸ ê´€ë¦¬ì ì¸ì¦ ì‹¤íŒ¨:', data.message);
                    localStorage.removeItem('admin-token');
                    sessionStorage.removeItem('admin-user');
                    window.location.href = '/admin-login';
                    return false;
                }
                
                // ê´€ë¦¬ì ì •ë³´ë¥¼ ì„¸ì…˜ì— ì €ì¥
                sessionStorage.setItem('admin-user', JSON.stringify(data.admin));
                console.log('âœ… ê´€ë¦¬ì ì¸ì¦ ì„±ê³µ:', data.admin.username);
                
                // í˜ì´ì§€ì— ê´€ë¦¬ì ì •ë³´ í‘œì‹œ
                updateAdminHeader(data.admin);
                
                return true;
                
            } catch (error) {
                console.error('âŒ ê´€ë¦¬ì ì¸ì¦ í™•ì¸ ì¤‘ ì˜¤ë¥˜:', error);
                localStorage.removeItem('admin-token');
                sessionStorage.removeItem('admin-user');
                window.location.href = '/admin-login';
                return false;
            }
        }
        
        // ê´€ë¦¬ì í—¤ë” ì—…ë°ì´íŠ¸
        function updateAdminHeader(admin) {
            const userActionsContainer = document.getElementById('header-user-actions');
            if (userActionsContainer) {
                userActionsContainer.innerHTML = `
                    <div class="flex items-center space-x-3">
                        <div class="flex items-center space-x-2">
                            <div class="w-8 h-8 bg-red-600 rounded-full flex items-center justify-center">
                                <i data-lucide="shield-check" class="w-4 h-4 text-white"></i>
                            </div>
                            <div class="hidden sm:block">
                                <div class="text-sm font-medium text-gray-900">${admin.username}</div>
                                <div class="text-xs text-red-600">${admin.role === 'super_admin' ? 'ìŠˆí¼ ê´€ë¦¬ì' : 'ê´€ë¦¬ì'}</div>
                            </div>
                        </div>
                        <button onclick="adminLogout()" class="text-gray-600 hover:text-red-600 transition-colors text-sm font-medium">
                            <i data-lucide="log-out" class="w-4 h-4 mr-1"></i>
                            ë¡œê·¸ì•„ì›ƒ
                        </button>
                    </div>
                `;
                
                // Lucide ì•„ì´ì½˜ ì¬ìƒì„±
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }
        }
        
        // ê´€ë¦¬ì ë¡œê·¸ì•„ì›ƒ
        async function adminLogout() {
            const adminToken = localStorage.getItem('admin-token');
            
            if (adminToken) {
                try {
                    await fetch('/api/admin-auth/logout', {
                        method: 'POST',
                        headers: {
                            'Authorization': `Bearer ${adminToken}`
                        }
                    });
                } catch (error) {
                    console.error('ë¡œê·¸ì•„ì›ƒ API í˜¸ì¶œ ì‹¤íŒ¨:', error);
                }
            }
            
            // ë¡œì»¬ í† í° ë° ì„¸ì…˜ ì •ë¦¬
            localStorage.removeItem('admin-token');
            sessionStorage.removeItem('admin-user');
            
            // ë¡œê·¸ì¸ í˜ì´ì§€ë¡œ ì´ë™
            window.location.href = '/admin-login';
        }
        
        // ì „ì—­ í•¨ìˆ˜ë¡œ ë…¸ì¶œ
        window.adminLogout = adminLogout;
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ê´€ë¦¬ì ì¸ì¦ í™•ì¸
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('ğŸ” ê´€ë¦¬ì í˜ì´ì§€ ì ‘ê·¼ - ì¸ì¦ í™•ì¸ ì¤‘...');
            
            const isAuthenticated = await checkAdminAuth();
            if (!isAuthenticated) {
                return; // ì¸ì¦ ì‹¤íŒ¨ ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ë¨
            }
            
            console.log('âœ… ê´€ë¦¬ì ì¸ì¦ ì™„ë£Œ - í˜ì´ì§€ ë¡œë“œ ì¤‘...');
        });
        
        // API ìš”ì²­ ì‹œ ê´€ë¦¬ì í† í° ìë™ ì¶”ê°€ í•¨ìˆ˜
        window.adminFetch = async function(url, options = {}) {
            const adminToken = localStorage.getItem('admin-token');
            
            if (!adminToken) {
                throw new Error('ê´€ë¦¬ì í† í°ì´ ì—†ìŠµë‹ˆë‹¤.');
            }
            
            const headers = {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${adminToken}`,
                ...options.headers
            };
            
            const response = await fetch(url, {
                ...options,
                headers
            });
            
            if (response.status === 401) {
                console.warn('âš ï¸ ê´€ë¦¬ì í† í°ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                adminLogout();
                throw new Error('ì¸ì¦ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
            
            return response;
        };
    </script>
    
    <script src="utils/tierSystem.js"></script>
    <script src="js/app-working.js"></script>
</body>
</html>