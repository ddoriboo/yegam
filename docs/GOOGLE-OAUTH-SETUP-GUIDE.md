# 구글 OAuth 설정 완전 가이드 📋

## 🚀 단계별 설정 과정

### 1️⃣ **구글 클라우드 콘솔 접속**

1. **브라우저에서 접속**: https://console.cloud.google.com/
2. **구글 계정으로 로그인** (Gmail 계정 사용)

### 2️⃣ **새 프로젝트 생성**

1. **상단 메뉴바**에서 프로젝트 선택기 클릭 (현재 프로젝트명 옆 화살표)
   ```
   [프로젝트명 ▼] <- 이 부분 클릭
   ```

2. **"새 프로젝트"** 버튼 클릭

3. **프로젝트 정보 입력**:
   - **프로젝트 이름**: `Yegam OAuth` (또는 원하는 이름)
   - **조직**: 선택 안함 (개인 프로젝트)
   - **위치**: 조직 없음

4. **"만들기"** 버튼 클릭

5. **프로젝트 생성 완료 후** 새 프로젝트로 전환

### 3️⃣ **OAuth 동의 화면 설정**

1. **왼쪽 메뉴**에서 `APIs 및 서비스` → `OAuth 동의 화면` 클릭

2. **사용자 유형 선택**:
   - ✅ **외부** 선택 (일반 사용자들이 로그인할 수 있음)
   - **"만들기"** 버튼 클릭

3. **OAuth 동의 화면 정보 입력**:

   **📋 앱 정보**:
   - **앱 이름**: `예겜 (Yegam)`
   - **사용자 지원 이메일**: 본인 Gmail 주소
   - **앱 로고**: (선택사항) 건너뛰기

   **📋 앱 도메인**:
   - **앱 홈페이지**: `https://yegam.ai.kr`
   - **앱 개인정보처리방침**: `https://yegam.ai.kr/privacy` (나중에 만들 예정)
   - **앱 서비스 약관**: `https://yegam.ai.kr/terms` (나중에 만들 예정)

   **📋 승인된 도메인**:
   - **도메인 추가**: `yegam.ai.kr` 입력 후 엔터

   **📋 개발자 연락처 정보**:
   - **이메일 주소**: 본인 Gmail 주소 입력

4. **"저장 후 계속"** 버튼 클릭

### 4️⃣ **범위(Scope) 설정**

1. **"범위 추가 또는 삭제"** 버튼 클릭

2. **다음 범위들 선택**:
   - ✅ `../auth/userinfo.email` (이메일 주소 보기)
   - ✅ `../auth/userinfo.profile` (개인 정보 보기)

3. **"업데이트"** 버튼 클릭

4. **"저장 후 계속"** 버튼 클릭

### 5️⃣ **테스트 사용자 추가 (개발 중)**

1. **"테스트 사용자 추가"** 버튼 클릭

2. **본인 Gmail 주소 입력** (개발/테스트용)

3. **"저장 후 계속"** 버튼 클릭

### 6️⃣ **OAuth 클라이언트 ID 생성**

1. **왼쪽 메뉴**에서 `APIs 및 서비스` → `사용자 인증 정보` 클릭

2. **상단의 "+ 사용자 인증 정보 만들기"** 버튼 클릭

3. **"OAuth 클라이언트 ID"** 선택

4. **애플리케이션 유형**: `웹 애플리케이션` 선택

5. **OAuth 클라이언트 정보 입력**:

   **📋 이름**: `Yegam Web Client`

   **📋 승인된 자바스크립트 원본**:
   ```
   https://yegam.ai.kr
   http://localhost:3000
   ```

   **📋 승인된 리디렉션 URI**:
   ```
   https://yegam.ai.kr/api/auth/google/callback
   http://localhost:3000/api/auth/google/callback
   ```

6. **"만들기"** 버튼 클릭

### 7️⃣ **클라이언트 ID와 시크릿 복사**

1. **OAuth 클라이언트가 생성되면** 팝업창이 나타남

2. **📋 다음 정보를 안전한 곳에 복사**:
   ```
   클라이언트 ID: 1234567890-abcdefghijk.apps.googleusercontent.com
   클라이언트 보안 비밀: GOCSPX-abcdefghijklmnop
   ```

3. **"확인"** 버튼 클릭

### 8️⃣ **Railway 환경변수 설정**

1. **Railway 대시보드 접속**: https://railway.app

2. **yegam 프로젝트** 선택

3. **Variables 탭** 클릭

4. **다음 환경변수 추가**:
   ```
   GOOGLE_CLIENT_ID=복사한_클라이언트_ID
   GOOGLE_CLIENT_SECRET=복사한_클라이언트_시크릿
   ```

5. **변경사항 저장**

## ✅ **테스트 방법**

### 로컬 테스트:
1. `.env` 파일에 OAuth 정보 추가:
   ```
   GOOGLE_CLIENT_ID=복사한_클라이언트_ID
   GOOGLE_CLIENT_SECRET=복사한_클라이언트_시크릿
   ```

2. 서버 재시작: `npm run dev`

3. `http://localhost:3000/login.html` 접속

4. **"Google로 로그인"** 버튼 클릭

### 프로덕션 테스트:
1. `https://yegam.ai.kr/login.html` 접속

2. **"Google로 로그인"** 버튼 클릭

## 🚨 **주의사항**

### ⚠️ **개발 모드 제한**:
- 현재 앱이 "테스트" 모드이므로 테스트 사용자만 로그인 가능
- 다른 사용자는 로그인 시 경고 화면이 나타남

### 📱 **프로덕션 배포시**:
1. **OAuth 동의 화면**에서 **"앱 게시"** 필요
2. 구글 검토 과정 (수일 소요)
3. 개인정보처리방침, 서비스 약관 페이지 필수

## 🔄 **문제 해결**

### **"redirect_uri_mismatch" 오류**:
- OAuth 클라이언트의 리디렉션 URI 재확인
- 정확한 URL 확인: `https://yegam.ai.kr/api/auth/google/callback`

### **"access_blocked" 오류**:
- 테스트 사용자에 Gmail 계정 추가
- 또는 앱 게시 후 일반 사용자 허용

### **환경변수 적용 안됨**:
- Railway 서비스 재시작
- 환경변수 오타 확인

## 📞 **지원**

문제가 발생하면 다음을 확인해주세요:
1. 구글 클라우드 콘솔 설정
2. Railway 환경변수 설정
3. URL 및 콜백 주소 정확성

---

**이 가이드를 따라하면 구글 소셜 로그인이 완벽하게 작동합니다!** 🎉